<!DOCTYPE html>
<html>

<head>
    <style>
        .chessmancontainer {
            position: absolute;
            top: 1px;
            left: 1px;
            width: 480px;
            height: 480px;
            margin: 0px;
            background-color: transparent;


        }

        .container {
            position: absolute;
            top: 0px;
            left: 0px;
            width: 480px;
            height: 480px;
            margin: 0px;
            background-color: transparent;

        }

        .board{
            width: 480px;
            height: 30px;
            display: flex;
            background-color: #daca39;
            border: 1px solid white;
        }

        .cube {

            width: 30px;
            height: 100%;
            border: 0.5px solid white;
        }

        .chessman-black {
            position: absolute;

            width: 20px;
            height: 20px;
            background-color: black;
            border-radius: 10px;
        }

        .chessman-white {
            position: absolute;

            width: 20px;
            height: 20px;
            background-color: white;
            border-radius: 10px;
        }

        .Btnrestart{
          
            width: 100%;
            height: 20px;
            display:flex;
            text-align:center;
        }
        .BTNback{
       
            width: 100%;
            height: 20px;
            display:flex;
            text-align:center;

        }
        .buttoncontainer{
            position:absolute;
            left:490px;
            top:0px;
            width:100px;
            height:60px;
            background-color :transparent;
            display:flex;
            flex-direction: column;
        }

     

     

       
    </style>
</head>

<body>





    <script>
         var flag = true; //true 白棋
        var isWin = false;//true 结束
        let inum = 0;
        const linenum = 15;

      const buttoncontain = document.createElement("div");
      document.body.appendChild(buttoncontain);
      buttoncontain.className = 'buttoncontainer';


//**************按钮重新开始    ****************
        const btnRestart = document.createElement("button");
        buttoncontain.appendChild(btnRestart);
        btnRestart.className = 'Btnrestart';
        btnRestart.textContent = "重新开始";
//************悔棋按钮***********************
        const btnBack = document.createElement("button");
        buttoncontain.appendChild(btnBack);
        btnBack.className = 'BTNbcak';
        btnBack.textContent = "悔棋";
//*************************************************************

        const container = document.createElement("div");
        document.body.appendChild(container);
        container.className = 'container';
        //console.log(containerone);

        const chessmancontain = document.createElement("div");
        document.body.appendChild(chessmancontain);
        chessmancontain.className = 'chessmancontainer';


          //用数组来存储下过的棋子位置 1 为白 2 为黑 0 代表没有下
          var arr = new Array(15);
        for (var i = 0; i < 15; i++) {
            arr[i] = new Array(15);
            for (var j = 0; j < 15; j++) {
                arr[i][j] = 0;
            }
        }


        for (let i = 0; i < linenum; i++) {
            const bro = document.createElement("div");

            container.appendChild(bro);
            bro.className = 'board';

            for (let i = 0; i < linenum; i++) {
                var cu = document.createElement("div");
                bro.appendChild(cu);
                cu.className = 'cube';
            }

        }

        function drawchess(num, x, y) {
            x0 = x * 30;
            y0 = y * 32;
            if (num == 1) {

                draw('white', x0, y0);
                arr[x][y] = 1;


            } else if (num == 2) {

                draw('black', x0, y0);
                arr[x][y] = 2;

            }

            result(num, x, y);
        }

        function draw(type, left, top) {


            var dom = document.createElement('div');
            chessmancontain.appendChild(dom);
            dom.className = type === 'white' ? 'chessman-white' : 'chessman-black';

            dom.style.top = top + "px";
            dom.style.left = left + "px";
            console.log(dom);
            //console.log(top,left);
            return dom;

        }
        chessmancontain.addEventListener("click", function (event) {

            const x = event.clientX / 30;
            const y = event.clientY / 30;
            x0 = Math.round(x);
            y0 = Math.round(y);
            //console.log(x0,y0);
            if (isWin) {
                alert("游戏已经结束，请刷新重新开始！");
                return 0;
            }
            if (x0 <= 0 || x0 >= 15 || y0 <= 0 || y0 >= 15) {
                return;
            }
            //cosole.log(arr[x0]；
            if (arr[x0][y0] != 0) {

                alert("你不能在这个位置下棋");
                return;
            }


            if (flag) {
                flag = false;
                drawchess(1, x0, y0);
                inum++;

            } else {
                flag = true;
                drawchess(2, x0, y0);
                inum++;
            }
            //console.log(inum);
        });


        function result(num, x, y) {
            var n1 = 0;//左右方向
            var n2 = 0;//上下方向
            var n3 = 0;//从左上到右下
            var n4 = 0;//从右上到左下

            //**********左右方向***********
            for (var i = x; i >= 0; i--) {
                if (arr[i][y] != num) {
                    break;
                }
                n1++;
            }
            for (var i = x + 1; i < 15; i++) {
                if (arr[i][y] != num) {
                    break;
                }
                n1++;
            }

            //************上下方向**********
            for (var i = y; i >= 0; i--) {
                if (arr[x][i] != num) {
                    break;
                }
                n2++;
            }
            for (var i = y + 1; i < 15; i++) {
                if (arr[x][i] != num) {
                    break;
                }
                n2++;
            }

            //************左上到右下**********
            for (var i = x, j = y; i >= 0, j >= 0; i--, j--) {
                if (arr[i][j] != num) {
                    break;
                }
                n3++;
            }

            for (var i = x + 1, j = y + 1; i < 15, j < 15; i++, j++) {
                if (arr[i][j] != num) {
                    break;
                }
                n4++;
            }
            //****************右上到左下*************
            for (var i = x, j = y; i < 15, j >= 0; i--, j++) {
                if (arr[i][j] != num) {
                    break;
                }
                n4++;
            }
            for (var i = x + 1, j = y + 1; i >= 0, j < 15; i++, j--) {
                if (arr[i][j] != num) {
                    break;
                }
                n4++;
            }



            if (n1 >= 5 || n2 >= 5 || n3 >= 5 || n4 >= 5) {
                if (num == 1) {
                    alert("白棋赢了");
                }
                if (num == 2) {
                    alert("黑棋赢了");
                }
                isWin = true;

            }



            // console.log a change



        }


 

        btnRestart.addEventListener("click", function (event) {


           
            chessmancontain.innerHTML = "";
        })
        

    </script>
</body>

</html>